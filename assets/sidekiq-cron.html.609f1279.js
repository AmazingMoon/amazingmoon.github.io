import{_ as o,r as t,o as r,c as l,b as s,d as e,a as i,e as n}from"./app.8a9e6827.js";const c={},d=i(`<h1 id="\u8C08\u4E00\u8C08sidekiq-cron" tabindex="-1"><a class="header-anchor" href="#\u8C08\u4E00\u8C08sidekiq-cron" aria-hidden="true">#</a> \u8C08\u4E00\u8C08Sidekiq-Cron</h1><h2 id="\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a> \u5B89\u88C5</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>  gem <span class="token function">install</span> sidekiq 
  gem <span class="token function">install</span> sidekiq-cron
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u65B0\u5EFAjob" tabindex="-1"><a class="header-anchor" href="#\u65B0\u5EFAjob" aria-hidden="true">#</a> \u65B0\u5EFAjob</h2><div class="language-ruby ext-rb line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">FirstJob</span> <span class="token operator">&lt;</span> ApplicationJob
  queue_as <span class="token symbol">:default</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">perform</span></span>
    Article<span class="token punctuation">.</span>create<span class="token operator">!</span><span class="token punctuation">(</span><span class="token symbol">title</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&#39;first&#39;</span></span><span class="token punctuation">,</span> <span class="token symbol">text</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&#39;this is a demo&#39;</span></span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),p=n("\u8FD9\u91CC\u5199\u7684\u5B9A\u65F6\u4EFB\u52A1\u57FA\u4E8Eactive job\uFF0C\u5176\u4F59\u7684\u5199\u6CD5\u8BF7\u53C2\u8003"),u={href:"https://github.com/ondrejbartas/sidekiq-cron",target:"_blank",rel:"noopener noreferrer"},k=n("sidekiq-cron\u6587\u6863"),h=i(`<h2 id="config\u4E2D\u65B0\u5EFAschedule-yml" tabindex="-1"><a class="header-anchor" href="#config\u4E2D\u65B0\u5EFAschedule-yml" aria-hidden="true">#</a> /config\u4E2D\u65B0\u5EFAschedule.yml</h2><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">FirstJob</span><span class="token punctuation">:</span>
  <span class="token key atrule">cron</span><span class="token punctuation">:</span> <span class="token string">&quot;0 0 0 20 * *&quot;</span>
  <span class="token key atrule">class</span><span class="token punctuation">:</span> FirstJob
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),b=n("\u4E0A\u9762\u4EE3\u7801\u7684\u610F\u601D\u662F\u6BCF\u4E2A\u670820\u53F7\u6267\u884C\u5B9A\u65F6\u4EFB\u52A1firstjob\uFF0C\u5173\u4E8E\u66F4\u591Acron\u7684\u7528\u6CD5\uFF0C\u8BF7\u53C2\u8003"),m={href:"http://www.nncron.ru/help/EN/working/cron-format.htm",target:"_blank",rel:"noopener noreferrer"},v=n("Cron Format"),_=i(`<h2 id="config-initializers\u4E2D\u65B0\u5EFAsidekiq-rb" tabindex="-1"><a class="header-anchor" href="#config-initializers\u4E2D\u65B0\u5EFAsidekiq-rb" aria-hidden="true">#</a> /config/initializers\u4E2D\u65B0\u5EFAsidekiq.rb</h2><div class="language-ruby ext-rb line-numbers-mode"><pre class="language-ruby"><code>schedule_file <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&#39;config/scheduler.yml&#39;</span></span>

<span class="token keyword">if</span> <span class="token builtin">File</span><span class="token punctuation">.</span>exist<span class="token operator">?</span><span class="token punctuation">(</span>schedule_file<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> Sidekiq<span class="token punctuation">.</span>server<span class="token operator">?</span>
  Sidekiq<span class="token double-colon punctuation">::</span>Cron<span class="token double-colon punctuation">::</span>Job<span class="token punctuation">.</span>load_from_hash <span class="token constant">YAML</span><span class="token punctuation">.</span>load_file<span class="token punctuation">(</span>schedule_file<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E" aria-hidden="true">#</a> \u914D\u7F6E</h2><p>/config/application.rb\u6587\u4EF6\u4E2D\u6DFB\u52A0\uFF1A</p><div class="language-ruby ext-rb line-numbers-mode"><pre class="language-ruby"><code>config<span class="token punctuation">.</span>active_job<span class="token punctuation">.</span>queue_adapter <span class="token operator">=</span> <span class="token symbol">:sidekiq</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8" aria-hidden="true">#</a> \u542F\u52A8</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>redis-server <span class="token operator">&amp;</span> sidekiq
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,7),g=n("\u7531\u4E8Eredis\u4E3Asidekiq\u63D0\u4F9B\u6570\u636E\u5B58\u50A8\uFF0C\u6240\u4EE5\u542F\u52A8sidekiq\u524D\u5FC5\u987B\u5148\u542F\u52A8redis,\u66F4\u591A\u5173\u4E8Eredis\u8BF7\u53C2\u8003"),f={href:"https://github.com/antirez/redis",target:"_blank",rel:"noopener noreferrer"},y=n("redis");function q(x,w){const a=t("ExternalLinkIcon");return r(),l("div",null,[d,s("p",null,[s("em",null,[p,s("a",u,[k,e(a)])])]),h,s("p",null,[s("em",null,[b,s("a",m,[v,e(a)])])]),_,s("p",null,[s("em",null,[g,s("a",f,[y,e(a)])])])])}var C=o(c,[["render",q],["__file","sidekiq-cron.html.vue"]]);export{C as default};
